{% extends 'core/index.html' %}
{% load static %}

{% block slider %}
{% endblock %}
{% block nav %}
    {% with 'profile' as title %}
        {{ block.super }}
    {% endwith %}
{% endblock %}
{% block content %}
{% endblock %}
{% block contact %}
{% endblock %}

{% block profile %}
    <div id="about" class="page-alternate">
        <div class="container">
            <!-- Title Page -->
            <div class="row">
                <div class="span12">
                    <div class="title-page">
                        <h2 class="title">Profile</h2>
                        <h3 class="title-description">{{ user.get_full_name }}</h3>
                    </div>
                </div>
            </div>
            <!-- End Title Page -->

            <!-- People -->
            <div class="row">

                <!-- Start Profile -->
                <div class="span4 profile">
                    <div class="image-wrap">
                        <div class="hover-wrap">
                            <span class="overlay-img"></span>
                            <span class="overlay-text-thumb">Change photo</span>
                            <input type="file" class="avatar-input" hidden name="avatar">
                        </div>
                        <img src="{{ user.profile.avatar.url }}" alt="John Doe">
                    </div>
                    <h3 class="profile-name">{{ user.email }}</h3>
                    <p class="profile-description"></p>

                    <div class="social">
                        <ul class="social-icons">
                            <li><a href="#"><i class="font-icon-social-twitter"></i></a></li>
                            <li><a href="#"><i class="font-icon-social-dribbble"></i></a></li>
                            <li><a href="#"><i class="font-icon-social-facebook"></i></a></li>
                        </ul>
                    </div>
                </div>
                <!-- End Profile -->

                <!-- Start Profile -->
                <div class="span4 profile">
                    {% if error %}
                        <p class="error">{{ error }}</p>
                    {% endif %}
                    <form method="post" action="/auth/profile">{% csrf_token %}
                        <label class="profile-description">City:</label>
                        <input name="city" value="{{ user.profile.city }}">
                        <label class="profile-description">Gender:</label>
                        <select name="gender">
                            <option {% if user.profile.gender == 1 %}
                                {{ 'selected' }}
                            {% endif %} value="1">male
                            </option>
                            <option {% if user.profile.gender == 2 %}
                                {{ 'selected' }}
                            {% endif %} value="2">not as good as male
                            </option>
                        </select>
                        <label class="profile-description">Phone number:</label>
                        <input name="phone_number" value="{{ user.profile.phone_number }}">
                        <label class="profile-description">Birth date:</label>
                        <input type="date" name="birth_date" value="{{ user.profile.birth_date|slugify }}"><br>
                        <input type="submit" class="button button-small" value="Update">
                    </form>
                    {% if team %}
                        <button onclick="location.href='/core/teams/{{ team.name }}'" type="button"
                                class="button button-small">My team
                        </button>
                    {% endif %}
                    <a href="/core/download/badge/{{ curr_user.pk }}" class="button button-small"
                       style="padding-top: 4px; padding-bottom: 4px;">Download badge</a>
                </div>

                <div class="span4 profile">

                    <h3 class="spec">Invitations to teams</h3>

                    <div class="info-block">
                        <div class="info-text">
                            {% if invitations %}
                                {% for invitation in invitations %}
                                    <p class="invitations"><a class="team-name"
                                                              href="/core/teams/{{ invitation.team }}">{{ invitation.team }}</a>
                                        <button class="button-accept">ACCEPT</button>
                                        <button class="button-decline">DECLINE</button>
                                    </p>
                                {% endfor %}
                            {% else %}
                                <p>You have no invitations yet</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <!-- End Profile -->

                <!-- Start Profile -->
                {#                <div class="span4 teams">#}
                {#                    <h3 class="spec">My teams</h3>#}
                {#                    <div class="info-block">#}
                {#                        <div class="info-text">#}
                {#                            {% if teams_rel_user %}#}
                {#                                {% for team_rel_user in teams_rel_user %}#}
                {#                                    <p class="team"><a class="team-name"#}
                {#                                                       href="/core/teams/{{ team_rel_user.team.name }}">{{ team_rel_user.team.name }}</a>#}
                {#                                    </p>#}
                {#                                {% endfor %}#}
                {#                            {% else %}#}
                {#                                <p style="text-align: center">You have not joined any team yet</p>#}
                {#                            {% endif %}#}
                {#                        </div>#}
                {#                    </div>#}
                {##}
                {#                </div>#}
                <!-- End People -->
            </div>
        </div>
    </div>
{% endblock %}