{% extends 'core/index.html' %}
{% load static %}

{% block slider %}
{% endblock %}
{% block nav %}
    {% with 'competition' as title %}
        {{ block.super }}
    {% endwith %}
{% endblock %}
{% block content %}
{% endblock %}
{% block contact %}
{% endblock %}

{% block profile %}
    <div id="about" class="page-alternate">
        <div class="container">
            <!-- Title Page -->
            <div class="row">
                <div class="span12">
                    <div class="title-page">
                        <h2 class="title">{{ competition.name }}</h2>
                    </div>
                </div>
            </div>
            <!-- End Title Page -->

            <!-- People -->
            <div class="row">

                <!-- Start Profile -->
                <div class="span4 profile">
                    <div class="image-wrap">
                        <img src="{{ competition.logo.url }}" alt="John Doe">
                    </div>
                </div>
                <!-- End Profile -->

                <!-- Start Profile -->
                <div class="span4 profile">
                    <label class="profile-description">Region: {{ competition.region }}</label>
                    <label class="profile-description">Members count: {{ members_count }}</label>
                    <label class="profile-description">Teams count: {{ teams_count }}</label>
                    <label class="profile-description">Started at: {{ competition.started_at|default:"Empty" }}</label>

                    <label id="curr-competition-id" style="visibility: hidden;">{{ competition.pk }}</label>

                    {% if can_signup.team and can_signup.is_coach %}
                        <button id="signup-team-competition" type="button" class="button button-small">Register team</button>
                        {% elif can_signup.team == False and can_signup.is_coach %}
                        <button id="signout-team-competition" type="button" class="button button-small">Unregister team</button>
                    {% endif %}
                    {% if can_signup.user == True %}
                        <button id="signup-user-competition" type="button" class="button button-small">Register as single</button>
                        {% elif can_signup.team == None or can_signup.team and can_signup.user == False %}
                        <button id="signout-user-competition" type="button" class="button button-small">Unregister as single</button>
                    {% endif %}
                </div>

                <div class="span4 profile">

                    <h3 class="spec">Description</h3>

                    <div class="info-block">
                        <div class="info-text competition-description">
                            <p>{{ competition.description }}</p>
                        </div>
                    </div>
                </div>
                <!-- End People -->
            </div>
            <div class="row">
                <div class="span4 profile distances-competition">

                    <ul>
                        {% for distance in distances %}

                            <li style="border-bottom: 1px solid #3e3d41; margin-bottom: 20px;">
                                <h4 style="margin: 0;"><b>Distance â„–{{ forloop.counter0|add:1 }}</b></h4>
                                <label for="id-length-{{ forloop.counter0 }}">Length</label>
                                <input type="text" id="id-length-{{ forloop.counter0 }}" value="{{ distance.length }}"
                                       disabled>
                                <input hidden name="distance_id_{{ forloop.counter0 }}" value="{{ distance.pk }}">
                                <label for="id-type-{{ forloop.counter0 }}">Distance type</label>
                                <select id="id-type-{{ forloop.counter0 }}" disabled>
                                    {% for type in types %}
                                        <option value="{{ type.0 }}"
                                                {% if type.0 == distance.distance_type %} selected {% endif %}
                                        >{{ type.1 }}</option>
                                    {% endfor %}
                                </select>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
{% endblock %}