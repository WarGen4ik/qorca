{% extends 'core/index.html' %}
{% load i18n %}
{% load static %}

{% block slider %}
{% endblock %}
{% block nav %}
    {% with 'profile' as title %}
        {{ block.super }}
    {% endwith %}
{% endblock %}
{% block content %}
{% endblock %}
{% block contact %}
{% endblock %}

{% block profile %}
    <script type="text/javascript" src="{% static 'js/qrcode.js' %}"></script>
    <div id="about" class="page-alternate">
        <div class="container">
            <!-- Title Page -->
            <div class="row">
                <div class="span12">
                    <div class="title-page">
                        <h2 class="title">{% trans 'Profile' %}</h2>
                        <h3 class="title-description">{{ curr_user.get_full_name }}</h3>
                    </div>
                </div>
            </div>
            <!-- End Title Page -->

            <!-- People -->
            <div class="row">

                <!-- Start Profile -->
                <div class="span4 profile">
                    <div class="image-wrap">
                        <img src="{{ curr_user.profile.avatar.url }}" alt="John Doe">
                    </div>
                    <h3 class="profile-name">{{ curr_user.email }}</h3>
                    <p class="profile-description"></p>
                </div>

                <div class="span4 profile">
                    <label class="profile-description">{% trans 'City:' %} {{ curr_user.profile.city|default:"Empty" }}</label>
                    <label class="profile-description">{% trans 'Gender:' %} {{ curr_gender|default:"Empty" }}</label>
                    <label class="profile-description">{% trans 'Phone number:' %} {{ curr_user.profile.phone_number|default:"Empty" }}</label>
                    <label class="profile-description">{% trans 'Birth date:' %} {{ curr_user.profile.birth_date|default:"Empty" }}</label>
                    <label id="curr-user-id" style="visibility: hidden;">{{ curr_user.pk }}</label>
                    {% if is_teamlead %}
                        <button id="send-invitation" type="button" class="button button-small">{% trans 'Send invitation' %}</button>
                    {% endif %}
                        <a href="/core/download/badge/{{ curr_user.pk }}" class="button button-small"
                        style="padding-top: 4px; padding-bottom: 4px;">{% trans 'Download badge' %}</a>
                </div>

                <div class="span4 profile">

{#                    <h3 class="spec">QR profile</h3>#}
{##}
{#                    <div class="info-block">#}
{#                        <div class="info-text">#}
{#                            <div class="image-wrap" id="qr_code">#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
                </div>
                <!-- End Profile -->

                <!-- Start Profile -->
                <div class="span4 profile">

                </div>
                <!-- End People -->
            </div>
        </div>
    </div>

    <script type="text/javascript">
        var qrcode = new QRCode(document.getElementById("qr_code"), {
            width: 500,
            height: 500
        });

        function makeCode() {
            var elText = "{{ site }}/core/user/{{ curr_user.pk }}";

            qrcode.makeCode(elText);
        }

        makeCode();
    </script>
{% endblock %}